# TCC

## Relátorio - parte 02

Após inúmeros ajustes avançados nas configurações do sistema operacional ArchLinux, a assistente virtual ainda assim apresentava erros sempre que o sistema de saída de áudio fosse requirido, algo que não ocorria quando os parâmetros eram apenas textuais. Mesmo utilizando ambientes virtuais, como o PyENV e o ASDF definidos para a versão 3.6 do Python, os erros persistiam arduamente. A instabilidade era enorme a ponto de inutilizar o gerenciador de pacotes do Python chamado Pip. Este incidente ocorreu diante do cenário onde haviam duas versões diferentes do Pip instalados para gerenciar os mesmos pacotes. O sistema operacional ficou com o Python inutilizável para importar as bibliotecas externas, mesmo tendo desinstalados os ambientes virtuais que foram criados para atender a este propósito com segurança.

Com o Python inutilizável seria então preciso reinstalar o sistema operacional por completo. Por sorte, tinhamos outro computador disponível, este por sua vez utilizando o sistema operacional Manjaro com a interface gráfica KDE Plasma. Este sistema poderia ser utilizado para uso temporário de testes enquanto o backup dos arquivos pessoais contidos na máquina principal estavam sendo realizados, pois o Manjaro é uma distribuíção baseado no ArchLinux.

Refletimos detalhadamente sobre todo o desenvolvimento do projeto e chegamos a conclusão de que erros assim jamais poderiam ocorrer, inclusive no ambiente de desenvolvimento. Para evitar novos incidentes, decidimos mudar radicalmente a estratégia que vinhámos desempenhando e passamos a utilizar a linguagem de programação Shell Script para solucionar os problemas específicos que estavam acontecendo.

Fizemos uma redução do uso de bibliotecas externas escritas em Python que já estavam sendo requiridas previamente pelo nosso projeto. Procuramos por alternativas nativas para Linux ao invés de uma nova biblioteca em Python que fizesse a leitura de arquivos textuais quando requisitado. Encontramos um software chamado Festival, o qual atendia as nossas necessidades, pois não requer conexão com a internet, além de possuir uma licença livre para sua utilização.

Configuramos os arquivos em Shell Script para realizar a comunição entre o Python e o Festival forçando a inserção dos comandos por meio do sistema de redirecionamento de comandos com o pipeline do Linux. Executamos o código e percebemos que havíamos realizado um grande progresso, pois o código funcionou sem erros no interpretador da linguagem Python, além de solucionar o problema da saída do áudio. Finalmente a assistente virtual "aprendeu a falar".

Como o conteúdo escrito em Shell Script havia conseguido reduzir o número de dependencias e resolvido increvelmente o problema que estávamos enfrentando há meses, reforçamos o desenvolvimento deste arquivo com o máximo de "micro soluções" possíveis agrupadas por funções. Em pouco tempo de desenvolvimento pudemos observar que havíamos criado um biblioteca de 6524 linhas e que tivesse a sua aplicação não apenas para atender as necessidades da assistente virtual, mas também ter o seu uso definido para propósito geral. Esta biblioteca foi nomeada para Shell Script Library e a movemos para um repositório dedicado. Com isto facilitaria melhor o gerenciado deste novo projeto em possíveis aplicações futuras.

Esta nova estratégia mostrou-se muito promissora, pois consertou os erros que eram causados pelo versionamento do Python; possibilitou melhor tratamento do fluxo de dados da aplicação; melhor organização do código fonte do projeto; maior abstração dos comandos do terminal do sistema operacional; e, permitiu a portabilidade para outras distribuíções baseadas em Linux. A partir de então, o Python então passou a ser utilizado com a finalidade de importar e executar a biblioteca Shell Script Library e realizar o fluxo de dados da aplicação.

Para utilizar a assistente virtual adequademente é requirido que o usuário instale a biblioteca Shell Script Library separamente no sistema operacional. O principal motivo desta tomada de decisão foi que ao empacotarmos o projeto da assistante virtual para o repositório PyPi descobrimos que apenas os arquivos escritos na linguagem de programação Python são empacotados. Todos os demais são descartados e portanto apresentam erros, pois não são encontrados posteriormente justamente por não existirem.

Por fim, entendemos que o código fonte apesar de estar funcionando corretamente, este ainda estava projetado para as versões antigas da linguagem Python. Sendo assim, refatoramos novamente o código fonte, desta vez para a versão 3.10 do Python com o propósito de utilizar as propriedades "f string" e "match case" deixando o código fonte ainda mais legível e simplificado. Preservamos o uso do paradigma de programação orientado a objetos e realizamos novos testes. A assistente virtual VAL funcionou adequadamente sem requerer nenhum ambiente virtual.